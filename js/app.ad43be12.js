(function(t){function e(e){for(var n,r,o=e[0],d=e[1],u=e[2],l=0,p=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(t[n]=d[n]);c&&c(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var d=a[o];0!==i[d]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=d;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("85ec"),i=a.n(n);i.a},"22ae":function(t,e,a){"use strict";var n=a("695c"),i=a.n(n);i.a},3142:function(t,e,a){"use strict";var n=a("40ab"),i=a.n(n);i.a},"3e9c":function(t,e,a){"use strict";var n=a("af10"),i=a.n(n);i.a},"40ab":function(t,e,a){},5693:function(t,e,a){"use strict";var n=a("94b5"),i=a.n(n);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t._m(0),a("router-view")],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",{staticClass:"app-title"},[a("img",{staticClass:"beta",attrs:{src:"https://www.nethserver.org/wp-content/uploads/2015/01/beta.jpg"}}),a("img",{staticClass:"logo",attrs:{src:"/assets/harmonium.jpg"}}),t._v(" Learn Gurbani Keertan ")])}],r={name:"App",components:{}},o=r,d=(a("034f"),a("2877")),u=Object(d["a"])(o,i,s,!1,null,null,null),c=u.exports,l=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"homepage"},t._l(t.shabads,(function(e){return a("div",{key:e.slug,staticClass:"shabad-list-item"},[a("h2",[t._v(t._s(e.title))]),a("router-link",{staticClass:"button green",attrs:{to:{name:"Shabad",params:{shabadSlug:e.slug}}}},[t._v("Learn")])],1)})),0)},h=[],f=a("e10f"),v={name:"Home",data:function(){return{shabads:f}},mounted:function(){this.shabads=f.data}},y=v,b=(a("3142"),Object(d["a"])(y,p,h,!1,null,"0ff003f3",null)),m=b.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shabad-page"},[t.shabad?a("div",{staticClass:"shabad-info"},[t._v(" "+t._s(t.shabad.desc)+" Read the "),a("a",{attrs:{href:t.shabad.gurbaniUrl,target:"_blank"}},[t._v("full shabad here")]),t._v(". ")]):t._e(),a("wajaPlayer",{ref:"wajaPlayer",attrs:{shabad:t.shabad}}),t.shabad&&t.shabad.credits?a("div",{staticClass:"credits"},[t._v(" 🙏 "+t._s(t.shabad.credits)+" "),t.shabad.creditsUrl?a("span",[t._v(" Be sure to "),a("a",{attrs:{href:t.shabad.creditsUrl,target:"_blank"}},[t._v("check it out")]),t._v(". ")]):t._e()]):t._e(),t.isAdmin?a("shabadEditor",{attrs:{shabad:t.shabad},on:{update:t.updateSprites}}):t._e()],1)},w=[],x=(a("7db0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"waja-player"},[a("div",{staticClass:"waja-player-actions"},[a("button",{attrs:{disabled:0===t.currentPanktiIndex},on:{click:function(e){return t.movePrevious()}}},[a("span",{staticClass:"icon-previous2"})]),a("button",{on:{click:function(e){return t.play("p"+t.currentPanktiIndex)}}},[t.isPlaying?a("span",{staticClass:"icon-stop2"}):a("span",{staticClass:"icon-play3"})]),a("button",{attrs:{disabled:t.currentPanktiIndex===this.shabad.panktis.length-1},on:{click:function(e){return t.moveNext()}}},[a("span",{staticClass:"icon-next2"})])]),a("div",{staticClass:"waja-wrapper-outer"},[a("div",{staticClass:"waja-wrapper",style:{transform:"scale("+t.wajaPlayerScaleVal+")"}},[t.currentPankti?a("div",{staticClass:"pankti"},t._l(t.currentPankti,(function(e){return a("span",{key:e.word,staticClass:"word",class:{active:e===t.currentPanktiItem},on:{click:function(a){return t.playWord(e)}}},[t._v(t._s(e.word))])})),0):t._e(),a("waja",{attrs:{activeKey:t.activeKey}})],1)])])}),g=[],P=(a("4160"),a("c975"),a("d3b7"),a("159b"),a("ddb0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"waja"},[a("div",{staticClass:"white"},t._l(t.whitekeys,(function(e,n){return a("div",{key:n,staticClass:"w",class:{active:t.activeKey&&"w"==t.activeKey.type&&t.activeKey.index==n},attrs:{id:"w"+n}})})),0),a("div",{staticClass:"black"},t._l(t.blackkeys,(function(e,n){return a("div",{key:n,staticClass:"b",class:{active:t.activeKey&&"b"==t.activeKey.type&&t.activeKey.index==n},style:{left:e.whiteKeyIndex*t.blackKeyPositionOffset+"px"},attrs:{id:"'b'+i"}})})),0)])}),_=[],I={name:"Waja",props:["activeKey"],data:function(){return{whitekeys:24,blackKeyPositionOffset:34,blackkeys:[{whiteKeyIndex:0},{whiteKeyIndex:1},{whiteKeyIndex:3},{whiteKeyIndex:4},{whiteKeyIndex:5},{whiteKeyIndex:7},{whiteKeyIndex:8},{whiteKeyIndex:10},{whiteKeyIndex:11},{whiteKeyIndex:12},{whiteKeyIndex:14},{whiteKeyIndex:15},{whiteKeyIndex:17},{whiteKeyIndex:18},{whiteKeyIndex:19},{whiteKeyIndex:21},{whiteKeyIndex:22}]}}},S=I,j=(a("3e9c"),Object(d["a"])(S,P,_,!1,null,"0c2cf64a",null)),C=j.exports,K={name:"WajaPlayer",components:{waja:C},props:["shabad"],data:function(){return{currentPankti:null,activeKey:null,musicPlayer:null,currentPanktiItem:null,isPlaying:!1,wajaPlayerScaleVal:1}},computed:{currentPanktiIndex:function(){return this.shabad.panktis.indexOf(this.currentPankti)}},created:function(){this.currentPankti=this.shabad.panktis[0],this._loadAudio(),this.adjustWajaScaleValue(),window.addEventListener("resize",this.adjustWajaScaleValue)},destroyed:function(){this.musicPlayer.destroy(),window.removeEventListener("resize",this.adjustWajaScaleValue)},methods:{adjustWajaScaleValue:function(){var t=834,e=window.innerWidth/t;this.wajaPlayerScaleVal=e>1?1:e},play:function(t){var e=this;if(this.isPlaying)return this.musicPlayer.stop(),this.activeKey=null,this.currentPanktiItem=null,void(this.isPlaying=!1);this.isPlaying=!0,this.musicPlayer.play(t).on("end",(function(){e.activeKey=null,e.currentPanktiItem=null,e.isPlaying=!1})).on("progress",(function(t,a){var n=t*a;e.currentPanktiItem=e.currentPankti.find((function(t){return n>=parseInt(t.keys[0].audioStart)&&n<=parseInt(t.keys[t.keys.length-1].audioEnd)})),console.log(e.currentPanktiIndex),e.currentPanktiItem&&(e.activeKey=e.currentPanktiItem.keys.find((function(t){return n>=parseInt(t.audioStart)&&n<=parseInt(t.audioEnd)})))}))},playWord:function(t){this.play("p"+this.currentPanktiIndex+"w"+this.currentPankti.indexOf(t))},movePrevious:function(){this.currentPankti=this.shabad.panktis[this.currentPanktiIndex-1]},moveNext:function(){this.currentPankti=this.shabad.panktis[this.currentPanktiIndex+1]},loadSprites:function(){var t={};this.shabad.panktis.forEach((function(e,a){e.forEach((function(e,n){var i="p"+a+"w"+n;t[i]={start:parseInt(e.keys[0].audioStart),end:parseInt(e.keys[e.keys.length-1].audioEnd)}}));var n="p"+a,i=e[e.length-1];t[n]={start:parseInt(e[0].keys[0].audioStart),end:parseInt(i.keys[i.keys.length-1].audioEnd)}})),console.log("Generated sprites",t),this.musicPlayer.removeSprites(),this.musicPlayer.addSprites(t)},_loadAudio:function(){this.musicPlayer=window.PIXI.sound.Sound.from({url:this.shabad.audio,preload:!0,singleInstance:!0}),this.loadSprites()}}},E=K,O=(a("dc5a"),Object(d["a"])(E,x,g,!1,null,"9a681650",null)),A=O.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shabad-editor"},[a("div",{staticClass:"accordion"},t._l(t.shabad.panktis,(function(e,n){return a("div",[a("div",{staticClass:"title active",on:{click:function(e){return t.toggleAccordion(n)}}},[t._v(" "+t._s(t.getPanktiShabad(e))+" "),a("button",{staticClass:"text-only",attrs:{title:"Delete pankti"},on:{click:function(e){return t.deletePankti(n)}}},[a("span",{staticClass:"icon-bin"})])]),a("div",{staticClass:"content",class:{active:n===t.activeIndex}},[a("table",t._l(e,(function(n,i){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:n.word,expression:"panktiItem.word"}],attrs:{type:"text"},domProps:{value:n.word},on:{input:function(e){e.target.composing||t.$set(n,"word",e.target.value)}}}),a("button",{staticClass:"text-only",on:{click:function(a){return t.removeWord(e,i)}}},[a("span",{staticClass:"icon-bin"})])]),a("td",[t._l(n.keys,(function(e){return a("div",{staticClass:"fields"},[a("div",{staticClass:"field"},[a("label",[t._v("Type")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"key.type"}],attrs:{type:"text"},domProps:{value:e.type},on:{input:function(a){a.target.composing||t.$set(e,"type",a.target.value)}}})]),a("div",{staticClass:"field"},[a("label",[t._v("Index")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.index,expression:"key.index"}],attrs:{type:"text"},domProps:{value:e.index},on:{input:function(a){a.target.composing||t.$set(e,"index",a.target.value)}}})]),a("div",{staticClass:"field"},[a("label",[t._v("Start")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.audioStart,expression:"key.audioStart"}],attrs:{type:"text"},domProps:{value:e.audioStart},on:{input:[function(a){a.target.composing||t.$set(e,"audioStart",a.target.value)},t.forceUpdate]}})]),a("div",{staticClass:"field"},[a("label",[t._v("End")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.audioEnd,expression:"key.audioEnd"}],attrs:{type:"text"},domProps:{value:e.audioEnd},on:{input:[function(a){a.target.composing||t.$set(e,"audioEnd",a.target.value)},t.forceUpdate]}})]),a("button",{staticClass:"text-only",on:{click:function(a){return t.removeKey(n.keys,e)}}},[a("span",{staticClass:"icon-bin"})])])})),a("button",{staticClass:"button green sm",on:{click:function(e){return t.addAnotherKey(n)}}},[t._v("Add another key")])],2)])})),0),a("button",{staticClass:"button green sm",on:{click:function(a){return t.addAnotherWord(e)}}},[t._v("Add Another Word")])])])})),0),a("button",{staticClass:"button green",on:{click:function(e){return t.addAnotherPankti()}}},[t._v("Add another pankti")]),a("button",{staticClass:"button green",on:{click:function(e){return t.outputJson()}}},[t._v("Output Json")])])},W=[],N=(a("a15b"),a("d81d"),a("a434"),a("498a"),{name:"ShabadEditor",props:["shabad"],data:function(){return{activeIndex:0}},methods:{getPanktiShabad:function(t){var e=t.map((function(t){return t.word})).join(" ").trim();return e.length>0?e:"AWAITING TITLE"},toggleAccordion:function(t){t===this.activeIndex?this.activeIndex=null:this.activeIndex=t},deletePankti:function(t){this.shabad.panktis.splice(t,1),this.$emit("update")},addAnotherPankti:function(){var t=[];this.shabad.panktis.push(t),this.addAnotherWord(t),this.activeIndex=this.shabad.panktis.length-1},addAnotherWord:function(t){var e={word:"",keys:[]};t.push(e)},removeWord:function(t,e){t.splice(e,1),this.$emit("update")},addAnotherKey:function(t){t.keys.push({type:"",index:0,audioStart:"0",audioEnd:"0"}),this.$emit("update")},removeKey:function(t,e){t.splice(t.indexOf(e),1),this.$emit("update")},forceUpdate:function(){this.$emit("update")},outputJson:function(){console.log(this.shabad),console.log(JSON.stringify(this.shabad))}}}),T=N,U=(a("22ae"),Object(d["a"])(T,$,W,!1,null,"dd5a57f0",null)),J=U.exports,V={name:"Home",components:{wajaPlayer:A,shabadEditor:J},data:function(){return{shabad:null,isAdmin:!1}},created:function(){var t=this;this.shabad=f.data.find((function(e){return e.slug==t.$route.params.shabadSlug})),this.isAdmin="true"===this.$route.query.isAdmin},methods:{updateSprites:function(){this.$refs.wajaPlayer.loadSprites()}}},G=V,H=(a("5693"),Object(d["a"])(G,k,w,!1,null,"79d639ed",null)),L=H.exports;n["a"].use(l["a"]);var M=new l["a"]({routes:[{path:"/",name:"Home",component:m},{path:"/shabads/:shabadSlug",name:"Shabad",component:L}]});n["a"].config.productionTip=!1,new n["a"]({router:M,render:function(t){return t(c)}}).$mount("#app")},"695c":function(t,e,a){},"85ec":function(t,e,a){},"8eba":function(t,e,a){},"94b5":function(t,e,a){},af10:function(t,e,a){},dc5a:function(t,e,a){"use strict";var n=a("8eba"),i=a.n(n);i.a},e10f:function(t){t.exports=JSON.parse('{"data":[{"slug":"Sookey-Harey-Kiye","gurbaniUrl":"https://www.sikhitothemax.org/shabad?id=578","audio":"assets/audio.mp3","title":"ਸੂਕੇ ਹਰੇ ਕੀਏ ਖਿਨ ਮਾਹੇ ॥","credits":"Special thanks to SikhiToTheMax for the inspiration to this shabad on youtube.","creditsUrl":"https://www.youtube.com/watch?v=ZxfUz1SHb0k","desc":"This shabad was composed by Guru Arjan Dev ji (5th Guru Sahib) in Raag Guari.","panktis":[[{"word":"ਸੂਕੇ","keys":[{"type":"w","index":9,"audioStart":0.5,"audioEnd":2.2}]},{"word":"ਹਰੇ","keys":[{"type":"b","index":6,"audioStart":2.2,"audioEnd":2.3},{"type":"b","index":7,"audioStart":2.3,"audioEnd":2.8},{"type":"w","index":9,"audioStart":2.8,"audioEnd":3.5}]},{"word":"ਕੀਏ","keys":[{"type":"w","index":9,"audioStart":3.7,"audioEnd":4},{"type":"b","index":6,"audioStart":4,"audioEnd":4.3},{"type":"b","index":5,"audioStart":4.3,"audioEnd":5}]},{"word":"ਖਿਨ","keys":[{"type":"w","index":7,"audioStart":5.1,"audioEnd":5.6}]},{"word":"ਮਾਹੇ","keys":[{"type":"b","index":5,"audioStart":5.7,"audioEnd":6.3},{"type":"b","index":6,"audioStart":6.3,"audioEnd":7}]}]]}]}')}});
//# sourceMappingURL=app.ad43be12.js.map