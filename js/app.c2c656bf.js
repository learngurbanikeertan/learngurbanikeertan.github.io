(function(t){function e(e){for(var i,r,o=e[0],d=e[1],u=e[2],l=0,p=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(t[i]=d[i]);c&&c(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,o=1;o<a.length;o++){var d=a[o];0!==n[d]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},n={app:0},s=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=d;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("85ec"),n=a.n(i);n.a},"28ef":function(t,e,a){"use strict";var i=a("bb55"),n=a.n(i);n.a},"2f1d":function(t,e,a){"use strict";var i=a("67ff"),n=a.n(i);n.a},3142:function(t,e,a){"use strict";var i=a("40ab"),n=a.n(i);n.a},"3e9c":function(t,e,a){"use strict";var i=a("af10"),n=a.n(i);n.a},"40ab":function(t,e,a){},5693:function(t,e,a){"use strict";var i=a("94b5"),n=a.n(i);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t._m(0),a("router-view")],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",{staticClass:"app-title"},[a("img",{staticClass:"beta",attrs:{src:"https://www.nethserver.org/wp-content/uploads/2015/01/beta.jpg"}}),a("img",{staticClass:"logo",attrs:{src:"/assets/harmonium.jpg"}}),t._v(" Learn Gurbani Keertan ")])}],r={name:"App",components:{}},o=r,d=(a("034f"),a("2877")),u=Object(d["a"])(o,n,s,!1,null,null,null),c=u.exports,l=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"homepage"},t._l(t.shabads,(function(e){return a("div",{key:e.slug,staticClass:"shabad-list-item"},[a("h2",[t._v(t._s(e.title))]),a("router-link",{staticClass:"button green",attrs:{to:{name:"Shabad",params:{shabadSlug:e.slug}}}},[t._v("Learn")])],1)})),0)},h=[],y=a("e10f"),f={name:"Home",data:function(){return{shabads:y}},mounted:function(){this.shabads=y.data}},b=f,v=(a("3142"),Object(d["a"])(b,p,h,!1,null,"0ff003f3",null)),m=v.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shabad-page"},[t.shabad?a("div",{staticClass:"shabad-info"},[t._v(" "+t._s(t.shabad.desc)+" Read the "),a("a",{attrs:{href:t.shabad.gurbaniUrl,target:"_blank"}},[t._v("full shabad here")]),t._v(". ")]):t._e(),a("wajaPlayer",{ref:"wajaPlayer",attrs:{shabad:t.shabad}}),t.shabad&&t.shabad.credits?a("div",{staticClass:"credits"},[t._v(" 🙏 "+t._s(t.shabad.credits)+" "),t.shabad.creditsUrl?a("span",[t._v(" Be sure to "),a("a",{attrs:{href:t.shabad.creditsUrl,target:"_blank"}},[t._v("check it out")]),t._v(". ")]):t._e()]):t._e(),t.isAdmin?a("shabadEditor",{attrs:{shabad:t.shabad},on:{update:t.updateSprites}}):t._e()],1)},k=[],x=(a("7db0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"waja-player"},[a("div",{staticClass:"waja-player-actions"},[a("div",{staticClass:"speed-control"},[a("label",{attrs:{for:"speed"}},[t._v("Speed")]),a("a",{class:{active:t.speed===t.slowSpeed},attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.setSpeed(t.slowSpeed)}}},[t._v("Slow")]),a("a",{class:{active:1===t.speed},attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.setSpeed(1)}}},[t._v("Normal")])]),a("div",{staticClass:"media-controls"},[a("button",{attrs:{disabled:0===t.currentPanktiIndex},on:{click:function(e){return t.movePrevious()}}},[a("span",{staticClass:"icon-previous2"})]),t.isLoadingAudio?a("span",{staticClass:"spinner icon-spinner3"}):t._e(),t.isLoadingAudio?t._e():a("button",{on:{click:function(e){return t.play("p"+t.currentPanktiIndex)}}},[t.isPlaying?a("span",{staticClass:"icon-stop2"}):a("span",{staticClass:"icon-play3"})]),a("button",{attrs:{disabled:t.currentPanktiIndex===this.shabad.panktis.length-1},on:{click:function(e){return t.moveNext()}}},[a("span",{staticClass:"icon-next2"})])]),a("div",{staticClass:"loop-control"})]),a("div",{staticClass:"waja-wrapper-outer"},[a("div",{staticClass:"waja-wrapper",style:{transform:"scale("+t.wajaPlayerScaleVal+")"}},[t.currentPankti?a("div",{staticClass:"pankti"},t._l(t.currentPankti,(function(e,i){return a("span",{key:e.word,staticClass:"word",class:{active:e===t.currentPanktiItem},on:{click:function(a){return t.playWord(e)}}},[t._v(" "+t._s(e.word)+" "),0===i&&!0===t.displayWordTooltip?a("span",{staticClass:"word-prompt bounce-3"},[t._v("Click the word to see it's keys")]):t._e()])})),0):t._e(),a("waja",{attrs:{activeKey:t.activeKey}})],1)])])}),S=[],g=(a("4160"),a("c975"),a("d3b7"),a("159b"),a("ddb0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"waja"},[a("div",{staticClass:"white"},t._l(t.whitekeys,(function(e,i){return a("div",{key:i,staticClass:"w",class:{active:t.activeKey&&"w"==t.activeKey.type&&t.activeKey.index==i},attrs:{id:"w"+i}})})),0),a("div",{staticClass:"black"},t._l(t.blackkeys,(function(e,i){return a("div",{key:i,staticClass:"b",class:{active:t.activeKey&&"b"==t.activeKey.type&&t.activeKey.index==i},style:{left:e.whiteKeyIndex*t.blackKeyPositionOffset+"px"},attrs:{id:"'b'+i"}})})),0)])}),_=[],P={name:"Waja",props:["activeKey"],data:function(){return{whitekeys:24,blackKeyPositionOffset:34,blackkeys:[{whiteKeyIndex:0},{whiteKeyIndex:1},{whiteKeyIndex:3},{whiteKeyIndex:4},{whiteKeyIndex:5},{whiteKeyIndex:7},{whiteKeyIndex:8},{whiteKeyIndex:10},{whiteKeyIndex:11},{whiteKeyIndex:12},{whiteKeyIndex:14},{whiteKeyIndex:15},{whiteKeyIndex:17},{whiteKeyIndex:18},{whiteKeyIndex:19},{whiteKeyIndex:21},{whiteKeyIndex:22}]}}},E=P,C=(a("3e9c"),Object(d["a"])(E,g,_,!1,null,"0c2cf64a",null)),j=C.exports,I=a("a1be"),K="hasDisplayedWordTooltip",A={name:"WajaPlayer",components:{waja:j},props:["shabad"],data:function(){return{currentPankti:null,activeKey:null,musicPlayer:null,currentPanktiItem:null,isLoadingAudio:!1,isPlaying:!1,wajaPlayerScaleVal:1,displayWordTooltip:!0,slowSpeed:.7,speed:1}},computed:{currentPanktiIndex:function(){return this.shabad.panktis.indexOf(this.currentPankti)}},created:function(){this.currentPankti=this.shabad.panktis[0],this._loadAudio(),this.adjustWajaScaleValue(),window.addEventListener("resize",this.adjustWajaScaleValue),"true"===localStorage.getItem(K)&&(this.displayWordTooltip=!1)},destroyed:function(){this.musicPlayer.destroy(),window.removeEventListener("resize",this.adjustWajaScaleValue)},methods:{adjustWajaScaleValue:function(){var t=834,e=window.innerWidth/t;this.wajaPlayerScaleVal=e>1?1:e},play:function(t){var e=this;if(this.isPlaying)return this.musicPlayer.stop(),this.activeKey=null,this.currentPanktiItem=null,void(this.isPlaying=!1);if(this.musicPlayer.isLoaded){this.isPlaying=!0;var a=this.musicPlayer.play(t).set("speed",this.speed);this._updateProgress(a)}else this.isLoadingAudio=!0,this.musicPlayer.play({sprite:t,loaded:function(t,a,i){e.isLoadingAudio=!1,e.isPlaying=!0,i.set("speed",e.speed),e._updateProgress(i)}})},setSpeed:function(t){this.speed=t,this.musicPlayer.instances.forEach((function(e){return e.set("speed",t)}))},playWord:function(t){this.play("p"+this.currentPanktiIndex+"w"+this.currentPankti.indexOf(t)),this.displayWordTooltip&&(this.displayWordTooltip=!1,localStorage.setItem(K,!0))},movePrevious:function(){this.currentPankti=this.shabad.panktis[this.currentPanktiIndex-1]},moveNext:function(){this.currentPankti=this.shabad.panktis[this.currentPanktiIndex+1]},loadSprites:function(){var t={};this.shabad.panktis.forEach((function(e,a){e.forEach((function(e,i){var n="p"+a+"w"+i;t[n]={start:e.keys[0].audioStart,end:e.keys[e.keys.length-1].audioEnd}}));var i="p"+a,n=e[e.length-1];t[i]={start:e[0].keys[0].audioStart,end:n.keys[n.keys.length-1].audioEnd}})),console.log("Generated sprites",t),this.musicPlayer.removeSprites(),this.musicPlayer.addSprites(t)},_updateProgress:function(t){var e=this;t.on("end",(function(){e.activeKey=null,e.currentPanktiItem=null,e.isPlaying=!1})).on("progress",(function(t,a){var i=t*a;e.currentPanktiItem=e.currentPankti.find((function(t){return i>=t.keys[0].audioStart&&i<=t.keys[t.keys.length-1].audioEnd})),e.currentPanktiItem&&(e.activeKey=e.currentPanktiItem.keys.find((function(t){return i>=t.audioStart&&i<=t.audioEnd})))}))},_loadAudio:function(){this.musicPlayer=I["a"].from({url:this.shabad.audio,singleInstance:!0}),this.loadSprites()}}},O=A,$=(a("28ef"),Object(d["a"])(O,x,S,!1,null,"7b502eb9",null)),W=$.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shabad-editor"},[a("div",{staticClass:"accordion"},t._l(t.shabad.panktis,(function(e,i){return a("div",[a("div",{staticClass:"title active",on:{click:function(e){return t.toggleAccordion(i)}}},[t._v(" "+t._s(t.getPanktiShabad(e))+" "),a("button",{staticClass:"text-only",attrs:{title:"Delete pankti"},on:{click:function(e){return t.deletePankti(i)}}},[a("span",{staticClass:"icon-bin"})])]),a("div",{staticClass:"content",class:{active:i===t.activeIndex}},[a("table",t._l(e,(function(i,n){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:i.word,expression:"panktiItem.word"}],attrs:{type:"text"},domProps:{value:i.word},on:{input:function(e){e.target.composing||t.$set(i,"word",e.target.value)}}}),a("button",{staticClass:"text-only",on:{click:function(a){return t.removeWord(e,n)}}},[a("span",{staticClass:"icon-bin"})])]),a("td",[t._l(i.keys,(function(e){return a("div",{staticClass:"fields"},[a("div",{staticClass:"field"},[a("label",[t._v("Type")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"key.type"}],attrs:{type:"text"},domProps:{value:e.type},on:{input:function(a){a.target.composing||t.$set(e,"type",a.target.value)}}})]),a("div",{staticClass:"field"},[a("label",[t._v("Index")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.index,expression:"key.index",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.index},on:{input:function(a){a.target.composing||t.$set(e,"index",t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"field"},[a("label",[t._v("Start")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.audioStart,expression:"key.audioStart",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.audioStart},on:{input:[function(a){a.target.composing||t.$set(e,"audioStart",t._n(a.target.value))},t.forceUpdate],blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"field"},[a("label",[t._v("End")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.audioEnd,expression:"key.audioEnd",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.audioEnd},on:{input:[function(a){a.target.composing||t.$set(e,"audioEnd",t._n(a.target.value))},t.forceUpdate],blur:function(e){return t.$forceUpdate()}}})]),a("button",{staticClass:"text-only",on:{click:function(a){return t.removeKey(i.keys,e)}}},[a("span",{staticClass:"icon-bin"})])])})),a("button",{staticClass:"button green sm",on:{click:function(e){return t.addAnotherKey(i)}}},[t._v("Add another key")])],2)])})),0),a("button",{staticClass:"button green sm",on:{click:function(a){return t.addAnotherWord(e)}}},[t._v("Add Another Word")])])])})),0),a("button",{staticClass:"button green",on:{click:function(e){return t.addAnotherPankti()}}},[t._v("Add another pankti")]),a("button",{staticClass:"button green",on:{click:function(e){return t.outputJson()}}},[t._v("Output Json")])])},N=[],U=(a("a15b"),a("d81d"),a("a434"),a("498a"),{name:"ShabadEditor",props:["shabad"],data:function(){return{activeIndex:0}},methods:{getPanktiShabad:function(t){var e=t.map((function(t){return t.word})).join(" ").trim();return e.length>0?e:"AWAITING TITLE"},toggleAccordion:function(t){t===this.activeIndex?this.activeIndex=null:this.activeIndex=t},deletePankti:function(t){this.shabad.panktis.splice(t,1),this.$emit("update")},addAnotherPankti:function(){var t=[];this.shabad.panktis.push(t),this.addAnotherWord(t),this.activeIndex=this.shabad.panktis.length-1},addAnotherWord:function(t){var e={word:"",keys:[]};t.push(e)},removeWord:function(t,e){t.splice(e,1),this.$emit("update")},addAnotherKey:function(t){t.keys.push({type:"",index:0,audioStart:"0",audioEnd:"0"}),this.$emit("update")},removeKey:function(t,e){t.splice(t.indexOf(e),1),this.$emit("update")},forceUpdate:function(){this.$emit("update")},outputJson:function(){console.log(this.shabad),console.log(JSON.stringify(this.shabad)),navigator.clipboard.writeText(JSON.stringify(this.shabad)).then((function(){console.log("Async: Copying to clipboard was successful!")}),(function(t){console.error("Async: Could not copy text: ",t)}))}}}),L=U,J=(a("2f1d"),Object(d["a"])(L,T,N,!1,null,"1886eec6",null)),V=J.exports,G={name:"Home",components:{wajaPlayer:W,shabadEditor:V},data:function(){return{shabad:null,isAdmin:!1}},created:function(){var t=this;this.shabad=y.data.find((function(e){return e.slug==t.$route.params.shabadSlug})),this.isAdmin="true"===this.$route.query.isAdmin},methods:{updateSprites:function(){this.$refs.wajaPlayer.loadSprites()}}},H=G,M=(a("5693"),Object(d["a"])(H,w,k,!1,null,"79d639ed",null)),D=M.exports;i["a"].use(l["a"]);var z=new l["a"]({routes:[{path:"/",name:"Home",component:m},{path:"/shabads/:shabadSlug",name:"Shabad",component:D}]});i["a"].config.productionTip=!1,new i["a"]({router:z,render:function(t){return t(c)}}).$mount("#app")},"67ff":function(t,e,a){},"85ec":function(t,e,a){},"94b5":function(t,e,a){},af10:function(t,e,a){},bb55:function(t,e,a){},e10f:function(t){t.exports=JSON.parse('{"data":[{"slug":"Sookey-Harey-Kiye","gurbaniUrl":"https://www.sikhitothemax.org/shabad?id=578","audio":"assets/audio.mp3","title":"ਸੂਕੇ ਹਰੇ ਕੀਏ ਖਿਨ ਮਾਹੇ ॥","credits":"Special thanks to SikhiToTheMax for the inspiration to this shabad on youtube.","creditsUrl":"https://www.youtube.com/watch?v=ZxfUz1SHb0k","desc":"This shabad was composed by Guru Arjan Dev ji (5th Guru Sahib) in Raag Guari. This shabad is in taal Dadra.","panktis":[[{"word":"ਸੂਕੇ","keys":[{"type":"w","index":9,"audioStart":1,"audioEnd":2.2},{"type":"b","index":6,"audioStart":2.2,"audioEnd":2.4}]},{"word":"ਹਰੇ","keys":[{"type":"b","index":7,"audioStart":2.4,"audioEnd":2.8},{"type":"w","index":9,"audioStart":2.8,"audioEnd":4.1}]},{"word":"ਕੀਏ","keys":[{"type":"b","index":6,"audioStart":4.1,"audioEnd":5},{"type":"b","index":5,"audioStart":5,"audioEnd":5.6}]},{"word":"ਖਿਨ","keys":[{"type":"w","index":7,"audioStart":5.6,"audioEnd":6.2}]},{"word":"ਮਾਹੇ","keys":[{"type":"b","index":5,"audioStart":6.2,"audioEnd":6.7},{"type":"b","index":6,"audioStart":6.7,"audioEnd":7.5}]}],[{"word":"ਅੰਮ੍ਰਿਤ","keys":[{"type":"w","index":7,"audioStart":7.8,"audioEnd":9},{"type":"b","index":5,"audioStart":9,"audioEnd":9.7}]},{"word":"ਦ੍ਰਿਸਟਿ","keys":[{"type":"b","index":4,"audioStart":9.7,"audioEnd":10.3},{"type":"b","index":7,"audioStart":10.3,"audioEnd":11.2}]},{"word":"ਸੰਚਿ","keys":[{"type":"w","index":9,"audioStart":11.2,"audioEnd":11.7},{"type":"b","index":6,"audioStart":11.7,"audioEnd":12.8}]},{"word":"ਜੀਵਾਏ","keys":[{"type":"w","index":9,"audioStart":12.8,"audioEnd":13.1},{"type":"b","index":6,"audioStart":13.1,"audioEnd":13.7},{"type":"b","index":5,"audioStart":13.7,"audioEnd":14.5}]}],[{"word":"ਕਾਟੇ","keys":[{"type":"b","index":8,"audioStart":28,"audioEnd":28.5},{"type":"w","index":12,"audioStart":28.5,"audioEnd":28.9},{"type":"b","index":7,"audioStart":28.8,"audioEnd":29.6}]},{"word":"ਕਸਟ","keys":[{"type":"b","index":8,"audioStart":29.6,"audioEnd":30},{"type":"b","index":7,"audioStart":30,"audioEnd":30.5},{"type":"w","index":9,"audioStart":30.5,"audioEnd":31}]},{"word":"ਪੂਰੇ","keys":[{"type":"b","index":8,"audioStart":31,"audioEnd":31.9},{"type":"w","index":12,"audioStart":31.9,"audioEnd":32.6}]},{"word":"ਗੁਰਦੇਵ","keys":[{"type":"b","index":7,"audioStart":32.6,"audioEnd":33},{"type":"b","index":8,"audioStart":33,"audioEnd":34.5}]}],[{"word":"ਸੇਵਕ","keys":[{"type":"w","index":13,"audioStart":41.5,"audioEnd":42.8}]},{"word":"ਕਉ","keys":[{"type":"b","index":9,"audioStart":42.8,"audioEnd":43.3}]},{"word":"ਦੀਨੀ","keys":[{"type":"w","index":13,"audioStart":43.3,"audioEnd":43.8},{"type":"w","index":12,"audioStart":43.8,"audioEnd":44.3},{"type":"b","index":8,"audioStart":44.3,"audioEnd":44.6},{"type":"b","index":7,"audioStart":44.6,"audioEnd":45}]},{"word":"ਅਪੁਨੀ","keys":[{"type":"b","index":8,"audioStart":45,"audioEnd":45.6},{"type":"w","index":13,"audioStart":45.6,"audioEnd":46.5}]},{"word":"ਸੇਵ","keys":[{"type":"w","index":12,"audioStart":46.5,"audioEnd":47.2},{"type":"b","index":8,"audioStart":47.2,"audioEnd":48}]}],[{"word":"ਸੇਵਕ","keys":[{"type":"b","index":8,"audioStart":54.4,"audioEnd":57.5},{"type":"b","index":7,"audioStart":0,"audioEnd":0}]},{"word":"ਕਉ","keys":[{"type":"b","index":0,"audioStart":"0","audioEnd":"0"}]},{"word":"ਦੀਨੀ","keys":[{"type":"b","index":0,"audioStart":"0","audioEnd":"0"}]},{"word":"ਅਪੁਨੀ","keys":[{"type":"b","index":0,"audioStart":"0","audioEnd":"0"}]},{"word":"ਸੇਵ","keys":[{"type":"b","index":6,"audioStart":52,"audioEnd":61}]}]]}]}')}});
//# sourceMappingURL=app.c2c656bf.js.map